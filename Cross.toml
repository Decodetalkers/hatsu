[build]
default-target = "x86_64-unknown-linux-musl"

[target.aarch64-unknown-linux-gnu]
image.name = "debian:bookworm-slim"
image.toolchain = ["aarch64-unknown-linux-gnu"]
pre-build = [
    # https://github.com/cross-rs/cross/wiki/Recipes#pre-build
    "dpkg --add-architecture arm64",
    "apt update",
    "apt install -y libssl-dev:arm64"
]

# [target.x86_64-unknown-linux-musl]
# image.name = "alpine:edge"
# image.toolchain = ["x86_64-unknown-linux-musl"]
# pre-build = ["apk update && apk add --no-cache build-base cmake openssl-dev"]

# [target.aarch64-unknown-linux-musl]
# image.name = "alpine:edge"
# image.toolchain = ["aarch64-unknown-linux-musl"]
# pre-build = ["apk update && apk add --no-cache build-base cmake openssl-dev"]
